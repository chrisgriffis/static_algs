# typesafe db row-record schema

in response to a real world scenario, i wanted to see if i could create a database table schema by specifying designated native types for field values, such that a given native type is restricted to those with an extant type-value-conversion-to-database-value-type. any non conformities create a compile error. using CRTP, i make it so that database row records can only be created as splinters off of an existing schema definition and type integrity is enforced. built in utilities allow serialization to output streams. column headings are constexpr static values that are bound to field types, independently of the field values. row-records have a constexpr static lookup table from heading to stringified value generated by the compiler.

github code:
https://github.com/chrisgriffis/static_algs/tree/master/typesafe_db_row_schema

working example here:
https://wandbox.org/permlink/uHjIO3kAUCEsrcVq

unsupported type compiler error example here
https://wandbox.org/permlink/xFZnuNDBM4dpiYp8

```
//...

  auto DB_SCHEMA_PHOTOS = db_row_schema<
        std::string,    // path;
        winrt::uint64_t,// folderKey;
        winrt::uint64_t,// thumbnailCacheId;
        winrt::uint32_t,// fileAttributes;
    
        int,// ProviderKey; "int" IS AN UNSUPPORTED NATIVE FIELD TYPE (per meta.h)
/*
db_types.h:62:14: error: 'struct meta::is_type::supported<int>' has no member named 'convert'
   61 |             Convert<std::remove_reference_t<decltype(std::get<Is>(m_fields))>>{}
      |             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   62 |             .convert(std::get<Is>(m_fields))...);
      |             ~^~~~~~~
*/
        winrt::uint64_t,// itemDate;
        winrt::uint64_t,// dateModified;
        winrt::uint32_t,// width;
        winrt::uint32_t// height;
    >::create_using_headings(
//...
```
